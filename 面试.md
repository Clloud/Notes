[数据结构与算法之美-为工程师量身打造的数据结构与算法私教课](https://time.geekbang.org/column/intro/126?code=XRKGcnAr%2F7QETBqBoRiCVHkd%2FgwYS5kFpGlO3O5AuhY%3D)

[Java学习路线](https://blog.csdn.net/qq_44543508/article/details/102651841?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-49.nonecase&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-49.nonecase)

# 职位要求

## 腾讯

>软件开发-后台开发方向
>
>**岗位描述：**
>
>从事腾讯产品服务后台的架构设计、开发、优化及运营工作；使用最优秀的架构设计及算法实现，在网络接入、业务运行逻辑、用户数据存储、业务数据挖掘等方向，为海量互联网用户提供稳定、安全、高效和可靠的专业后台支撑体系。
>
>**岗位要求：**
>
>- 编程基本功扎实，掌握C/C++/JAVA等开发语言、常用算法和数据结构；
>- 熟悉TCP/UDP网络协议及相关编程、进程间通讯编程；了解Python、Shell、Perl等脚本语言；
>- 了解MYSQL及SQL语言、编程，了解NoSQL,&nbsp;key-value存储原理；
>- 全面、扎实的软件知识结构，掌握操作系统、软件工程、设计模式、数据结构、数据库系统、网络安全等专业知识；
>- 了解分布式系统设计与开发、负载均衡技术，系统容灾设计，高可用系统等知识。

## 字节跳动

>后台开发实习生（可转正） — 广告商业平台
>
>**岗位描述：**
>1、负责字节跳动广告系统，代理商系统, 审核系统等平台开发；
>2、完善对内对外广告API的实现；
>3、表现优秀有转正机会。
>
>**岗位要求：**
>1、计算机相关专业，本科及以上学历，硕士生优先；
>2、良好的算法、数据结构基础，熟悉计算机操作系统、网络、数据库等课程，至少熟悉一门编程语言；
>3、要求有后台开发的实习/项目经验，热爱后台技术，熟悉MySQL，Memcached，Redis，消息队列等常用WEB组件者优先；
>4、有大规模系统开发经验者优先，熟悉计算广告，或者有相关开发经验者优先。


## B站

>后端开发工程师（人工智能）【2020届】
>
**岗位职责：**
1、B站个性化推荐、相关推荐、搜索等系统的开发工作，支撑海量的推荐与搜索请求，提升用户使用体验；
2、负责搜索推荐系统的架构升级、模块开发、数据流传输以及性能优化等，保证系统高效稳定；
3、负责推荐搜索业务上的产品、功能的研发，支持搜索推荐产品功能演进。
>
**岗位要求：**
1、精通至少一门后端编程语言；
2、熟悉网络编程、多线程、分布式编程技术，对数据结构和算法设计有较为深刻的理解；
3、了解unix、linux，Windows等主流操作系统原理，熟练运用系统层支持应用开发；
4、学习能力强，具有良好的沟通能力和良好的团队合作精神，逻辑思维能力强。

## 阿里

> **面试阿里P6岗要求**
>
> - Java集合：HashMap和ConcurrentHashMap，平时最好有读一些源码，最好知道每个参数为什么设置成这么大？有什么好处？
> - JUC包肯定要学，即使平时的编程根本不用，也必须得会。至少要知道aba，cas，aqs，unsafe，volatile，sync，以及常见的各种lock，死锁，线程池参数等，也必须要明白自旋，阻塞，死锁和它如何去定位，oom如何定位问题，cpu过高如何定位等基本的操作，你可以没有生产调试经验，但不代表你可以不会top，jps，jstack，jmap这些可能会问的东西。以及可能衍生的jmm模型和mesi协议等。
> - 大厂必问JVM：垃圾回收算法，垃圾收集器、JVM内存模型，每个区域用途，各种oom的种类，jvm调优经验，类加载过程，双亲委派等。
> - Spring就得抽空看源码了，一般会问到bean的生命周期，如何解决循环依赖，实现事务原理，动态代理原理等。
> - Dubbo也是必须问的，设计框架，负载均衡。
> - Redis更要多懂一点，单线程模型，aof，rdb，rewrite，主从，cluster，哪些类型？包含一些缓存常见的问题击穿、穿透、雪崩、数据一致性等。
> - Mysql，事务，锁，索引，b+树，主从这些你必须会
> - Mq ，我用的rocketmq，你得知道为什么用，重复消费，顺序消息，事务消息，高可用，消息丢失，挤压场景，整个消息发送消费的流程，读过源码更佳
> - Netty的话，零拷贝，bio，nio，aio，架构设计怎么样子的？用过看过更好
> - 算法，建议去刷题，我运气好，简单的算法让我碰到了，一些快排，堆排，二叉树相关的，链表反转，成环，环节点，跳楼梯等常规的简单算法建议刷刷，双指针，dp，递归这些还是多找找感觉，大数据内存有限的场景的统计，有时间一些middle可以去试试，手写红黑树你要是可以，那我估计算法你稳了。
> - 网络，http，tcp，https，udp，7层网络协议等，最好结合自己理解，背，你都要背下来。
> - 还有就是一些分布式事务实现，架构实现，比如抢红包，高并发下单等常规的场景设计，你来设计，你怎么去设计？多找一些大牛或者上网自己查，帮你看看有哪些漏洞，有那些解决方案？业界有哪些好的中间件？

# 面经整理

[**134. Gas Station**](https://leetcode-cn.com/problems/gas-station/)

[常见面试题整理](https://thinkwon.blog.csdn.net/article/details/104390612) 非常重要！！！

[三面字节跳动被虐得“体无完肤”，15天读完这份pdf，终拿下美团研发岗offer](https://www.jianshu.com/p/d6e9b1c211dd)

[RPC和Dubbo简介](https://www.jianshu.com/p/8ba4b7b834aa)



**常见考点有（划重点）：**

- 某种数据结构以及相关的操作：二叉树、链表、（多维）数组等

- 某种编程思想：二分、分治、贪心、搜索、动态规划等

- 找规律：数学性质、递推公式

- 纯编码：边界条件、逻辑完备性



链接：https://www.nowcoder.com/discuss/430817


\1. Java工程栈为主(Spring/MyBatis/MySQL/KV Storage/JUC框架)，欢迎其他语言转入，实习期间需快速上手  

   \2. 熟悉Shell操作，能够编写简单的脚本  

   \3. 熟悉计算机组成结构+良好的工程直觉，能够将算法应用于实际场景  

   \4. 有ACM训练经验，若获奖更佳  

   \5. 自发或者跟随实验室做过一些课程外的项目实践  

   \6. 刨根问底，熟悉1-2个接触过的开源框架底层原理



---



6.OutofMemory错误如何定位？

**java代码输出hello world 字符串的整个过程**

输出hello word全过程:
1.编译java文件--经前端编译器编译后进入静态常量池,属于字面量
2.类加载--将类加载进内存中,运行时数据结构,此时还未初始化字符串,字符串具有懒加载特性--使用时才会加载
3.执行- 创建:方法入栈执行,创建字符串字面量,堆区创建对象,字符串常量池引用这个对象,然后返回给栈对象真实引用; 执行: 解释执行输出helloword

---

服务化架构的演进

**MVC架构**：当业务规模很小时，将所有功能都不熟在同一个进程中，通过双机或者负载均衡器实现负债分流；此时，分离前后台逻辑的MVC架构是关键。

**RPC架构**：当垂直应用越来越多，应用之间交互不可避免，将核心和公共业务抽取出来，作为独立的服务，实现前后台逻辑分离。此时，用于提高业务复用及拆分的RPC框架是关键。

**SOA架构**：随着业务发展，服务数量越来越多，服务生命周期管控和运行态的治理成为瓶颈，此时用于提升服务质量的SOA服务治理是关键。

**微服务架构**：通过服务的原子化拆分，以及微服务的独立打包、部署和升级，小团队的交付周期将缩短，运维成本也将大幅度下降。

---



二叉树的遍历方式及其递归和非递归实现内部排序、外部排序、排序的稳定性、时空复杂度
Java基础知识：泛型、内部类、多态并查集正则表达式socket编程
高并发、高可用、分布式系统
基础：数据结构、操作系统、数据库、计算机网络语言：Java框架：Spring全家桶组件：消息队列、缓存、分布式组件

**面试经验汇总** 

- [本科生Java校招](https://zhuanlan.zhihu.com/p/105164640)
- [五轮阿里面试题及答案](https://www.jianshu.com/p/c8a271448dcd)
- [我的秋招之路](https://windliang.cc/2019/10/29/我的秋招之路/)

**专业课**复习资料**：**

 https://github.com/CyC2018

**Java**

Java面试题汇总1**：**https://mp.weixin.qq.com/s/AK99g04yJRXQFQcx1ak0fg

Java面试题汇总2：https://www.javanav.com/interview/93b0069472fd479393006c0e73043fc4.html

牛客网Java面试宝典： https://www.nowcoder.com/tutorial/94/ea1986fcff294f6292385703e94689e8https://github.com/Snailclimb/JavaGuide

**Java部分：**Java基础，集合，并发，多线程，JVM，设计模式**数据结构算法：**Java算法，数据结构**开源框架部分：**Spring，MyBatis，MVC，netty，tomcat**分布式部分：**架构设计，Redis缓存，Zookeeper，kafka，RabbitMQ，负载均衡等**微服务部分：**SpringBoot，SpringCloud，Dubbo，Docker

Hashmap源码相关，很细。AQS源码看过吗?没看过，说了一下大概的原理。如何建立高效索引线程池介绍一下redis跳表解释一下redis高可用解释一下

---

**01 Zookeeper 部分**

- CAP定理
- ZAB协议
- leader选举算法和流程

**02 Redis 部分**

- Redis的应用场景
- Redis支持的数据类型（必考）
- zset跳表的数据结构（必考）
- Redis的数据过期策略（必考）
- Redis的LRU过期策略的具体实现
- 如何解决Redis缓存雪崩，缓存穿透问题
- Redis的持久化机制（必考）Redis的管道pipeline

**03 Mysql 部分**

- 事务的基本要素
- 事务隔离级别如何解决事务的并发问题(脏读，幻读)？
- MVCC多版本并发控制？
- binlog,redolog,undolog都是什么，起什么作用？
- InnoDB的行锁/表锁？
- myisam和innodb的区别，什么时候选择myisam？
- 为什么选择B+树作为索引结构？索引B+树的叶子节点都可以存哪些东西？
- 查询在什么时候不走（预期中的）索引？
- sql如何优化?explain是如何解析sql的？
- order by原理

**04 JVM 部分**

- 运行时数据区域（内存模型）
- 垃圾回收机制
- 垃圾回收算法Minor GC和Full GC触发条件
- GC中Stop the world
- 各垃圾回收器的特点及区别双亲委派模型
- JDBC和双亲委派模型关系

**05 Java 基础部分**

- HashMap和ConcurrentHashMap区别
- ConcurrentHashMap的数据结构
- 高并发HashMap的环是如何产生的？
- volatile作用Atomic类如何保证原子性（CAS操作）
- synchronized和Lock的区别
- 为什么要使用线程池？
- 核心线程池ThreadPoolExecutor的参数
- ThreadPoolExecutor的工作流程
- 如何控制线程池线程的优先级
- 线程之间如何通信
- Boolean占几个字节
- jdk1.8/jdk1.7都分别新增了哪些特性？
- Exception和Error

**06 Spring 部分**

- Spring的IOC/AOP的实现
- 动态代理的实现方式
- Spring如何解决循环依赖（三级缓存）
- Spring的后置处理器
- Spring的@Transactional如何实现的？
- Spring的事务传播级别
- BeanFactory和ApplicationContext的联系和区别

**07 其他部分**

- 高并发系统的限流如何实现？
- 高并发秒杀系统的设计负载均衡如何设计？

---

**微软面试出现过的算法题**[]单向链表交换奇偶节点[]快速排序[]拓扑排序[]堆排序
[]构建二叉搜索树[x][347. 前 K 个高频元素](https://leetcode-cn.com/problems/top-k-frequent-elements/)[x][53. 最大子序和](https://leetcode-cn.com/problems/maximum-subarray/)[[x\]](https://leetcode-cn.com/problems/maximum-subarray/)[300. 最长上升子序列](https://leetcode-cn.com/problems/longest-increasing-subsequence/)[x][673. 最长递增子序列的个数](https://leetcode-cn.com/problems/number-of-longest-increasing-subsequence/) *****[[\]](https://leetcode-cn.com/problems/longest-common-subsequence/)[1143. 最长公共子序列](https://leetcode-cn.com/problems/longest-common-subsequence/)[x]实现一个取整函数（四舍六入五成双）
[]只出现一次的数字
字符串转数字高楼扔鸡蛋LRU股票买卖正则匹配

---

​	3.项目问题：（项目秒杀）

​	 介绍一下

​	 如何进行流量泄洪

​	 分布式存储的一致性

​	 如何保证分布式事务的一致性

​	 如何防止少卖超卖

​	 项目中如何结局事务问题

​	 项目中用到的设计模式

​	二面（还是那个主管，40min）

​	就是把一面的我没用专业术语回答上来的问题又让我回答了一遍，看看我有没有学习。

​	

​	三面（主管的老板，30min）：

​	1.一些非常基础的知识，记不清了，只记得有事务的隔离级别，真的很基础。

​	2.我的通信有关项目介绍

​	3.一些hr问题。

​	4.数学题：估算7的128次方的十进制有几位

​	

​	四面（代码测试）：

​	最大和子数组，很简单，但是不能调试，所以一些细节没注意到

​	

​	五面（交叉面，20min不到）

​	1.直接介绍项目，觉着我的项目没有实用性，不感兴趣

​	2.介绍通用项目，没有实用性，不感兴趣

​	3.回答一个基础问题，说我背书，不感兴趣

​	4.不感兴趣，挂了电话

​	

​	六面（交叉面，可能上次不行，再给我一次机会，30-40min）

​	1.项目

​	2.通信项目

​	3.hr问题

​	4.问我觉着前几次面试有什么面的不好的地方

​	

​	七面（hr面，20min不到）

​	1.前几次面试你学到了什么

​	2.阿里的面试有什么不一样

​	3.你平时喜欢干什么

​	4.进过阿里面试后，你以后怎么将面试的所学用到实际中

​	

​	3.比赛经历

​	4.除了学习书籍还喜欢啥书，学到了什么

​	5.其他有的没得

智力题：1000个人，10个试管，测新冠。讲了两个方法，一个是2进制表示，一个二分。

\15. 反问哪些不足，答：1）java方面需加强，如类加载器，容器，JVM，线程池，NIO，BIO，缓存，中间件；（非常nice，后面有用到，重点！）

. 进程间通信，同步机制，win下线程同步的API（卒）

6. socket编程有没有接触过，select epoll区别

5. 如何构建前缀树 

  6. 二叉树有哪些遍历方式，分别有哪些应用场景（回答的不好） 

  \7. 情景题，杭州现有30个消防站，如今想再增加3个，如何规划。

  \8. hashmap底层实现，如何解决哈希冲突 

  \9. JVM内存分布，不同版本之间有区别吗，什么区别？哪些区可能发生内存溢出并举例 

  \10. 自定义的java.lang.string类能否加载，为什么不能？（顺带讲了类加载器跟双亲委派机制） 

  \11. 那怎么可以实现加载这样的一个string类呢？（感觉被坑了，如果是java.lang.string的话一定是加载不了的，编译器会抛出异常；而我当时回答的是自定义类加载器，然就后逼逼了一段，面试官就嗯也没说别的，，，感觉被套路了，，大坑）

\8. 项目中RPC的交互用什么技术做的，为啥用HTTP协议来做，你觉得还可以用什么方法来做 

  \9. 开源的RPC框架有什么好处？有哪些框架，dubbo的协议（卒） 

  \10. 嘴贱提了一句dubbo的协议跟http的RESTful风格是不一样的，被反问你确定你们用的是RESTful嘛（卒）



---

**阿里一面：**

- 自我介绍、自己做的项目和技术领域
- 说一下sync的底层实现，锁优化，和lock的对比
- 讲一下JVM参数调优详细过程
- 为什么这么设置？好处是什么？描述gc场景，如何去分析gc日志？
- redis数据结构，使用场景，微博场景使用redis如何去设计用户关系？
- 线程池参数设定，为什么这么设定，作用？7大参数
- spring的循环依赖如何解决？为什么要三级缓存？
- 优先级队列的底层原理？

**阿里二面：**

- 自我介绍一下吧
- 聊项目
- 结合你项目问你如何设计，提出漏洞，你怎么解决？如何改进，万一挂了？加一台机器有没有问题？如果我非要不出问题怎么办？
- 高并发下单扣库存场景如何设计
- rocketMQ架构设计原理
- Dubbo框架实现原理
- 最近读了什么书？平时怎么学习？
- 常用的负载均衡，该怎么用，你能说下吗？

**阿里三面：**

- 这一面主要问项目，给你的压力感比较强
- 结合项目问，为什么这么设计？让你去优化，你怎么优化，引导你用一个合理的更好的方式去优化，数据库的设计等
- 在公司做了什么事情，各个系统业务线都是做什么的，你的绩效，手写算法链表反转？

**阿里四面：**

- JVM的主要组成部分及其作用？
- JVM运行时数据区包含哪些？
- JVM垃圾回收机制，何时触发MinorGC等操作
- JVM的垃圾回收算法：
- JVM 调优的工具？
- 常用的JVM调优参数？
- 堆栈的区别？
- 详细介绍一下 CMS 垃圾回收器？
- 怎么判断对象是否可以被回收？
- 新生代垃圾回收器和老生代垃圾回收器都有哪些？有什么区别？
- java类加载过程?
- 把你知道的中间件都说一下吧（瞬间懵了一下）



---



 关于***投递简历\***，我是从7月份开始关注河畔的就业信息栏的，里面有很多的信息，几乎每天早上来实验室第一件事就是刷河畔，看有没有招聘信息，我是不论公司大小，不论公司在哪里，我都投。投内推一定要抓紧，我投了成都美团内推之后的2、3天，我的室友想投，然后就被告知美团成都已经满了，只有其他城市的，所以时机还是很重要。给别人邮箱发邮件的时候，一定要写好你的基本信息，包括姓名、电话、意向岗位、性别、意向城市等。校招的时候填简历真的很恶心，东西很多，几乎每个公司都要填。我建议可以拿一个本子或者自己做一个Excel来记录投的公司和流程，这样心里有数一些。 

​    关于***面试\***，一般内推都是电话面试，只遇到过一次视频面试。开始还是很紧张，后来面多了就好了。我内推的时候电话面试没有被要求过写代码的，但是快排说了很多次，都是问的基础，问的很深。有些面试官，比如阿里的就是不把你问到你说不出话来，他是不会停的。有的面试官感觉有一个问问题的单子，然后他就照着那个单子在问。每一次面试都是一个查漏的机会，都会出现很多自己不会的问题，包括一些你认为你会的问题，面试官问深了，你还是不会。每次面试完，我都把问题记下来，把不会的都查一遍。 

​    关于***其他计算机基础\***，网络，3次握手，4次分手的图一定要会。https的过程，tcp/ip，http相关问题被问的也很多。操作系统，问过计算机的缓存，其他的没有什么映像了。数据结构，排序是基础，要滚瓜烂熟，推荐一个网址http://blog.csdn.net/hguisu/article/details/7776068/，链表相关（判断有没有环之类的问题），二叉树（B+，B*，B-，平衡二叉树），图（深度遍历，广度遍历）都要会。算法里面贪心和动态规划要会，感觉很多代码题都涉及这些，这个只有多刷题，多写代码，木有其他捷径。推荐一个左神的书《程序员代码面试指南—IT名企算法与数据结构题目最优解》，我没有买这本书，主要是我都是很晚才知道左神的，听了他的几次课，感觉受益匪浅，如果我很早就知道，我应该会买他的书看的。关于java底层，多看***jdk\******源码\***。

---

\8. 项目中RPC的交互用什么技术做的，为啥用HTTP协议来做，你觉得还可以用什么方法来做 

  \9. 开源的RPC框架有什么好处？有哪些框架，dubbo的协议（卒） 

  \10. 嘴贱提了一句dubbo的协议跟http的RESTful风格是不一样的，被反问你确定你们用的是RESTful嘛（卒）

一个项目是一个war包，tomcat是如何保证这些项目得隔离性的，然后我说问题不太懂，他的意识就是tomcat的类加载机制？不懂这个真的不懂 

  我先开始回答的是tomcat的构成：connector（endpoint、proecss、adaptor），contar 

  他说不是这个，然后我就答到jvm中破坏双亲委派模型，类似spring IOC破坏双亲委派模型实现加载不同版本的工程文件，误打误撞应该是答对了，他说好，这个问题到这 

---

早上10点，上来是华为的传统，手撕代码，求解将N分钱用1，3，5分钱表示的不重复的方案有几种，5分钟之内比较顺利了bugfree。

# 简历

有一份好的简历很重要！千万不要因为懒，就在以前的简历上随便改改，这份简历可是要伴随你好几个月的！！！ 
我的简历主要分为个人信息、教育经历、工作经历、项目经历、专业技能几个模块，大家可以根据自己的情况调整。 
个人信息，主要写名字、邮箱、手机号、出生日期就好啦，其他的看自己情况选择；教育经历，可以重点突出你的你的好成绩（不好就没必要啦）、获奖荣誉（国奖很加分的）；工作经历，我的是把之前在实习公司里做的项目写到了这里（我为了重点突出这个项目，所以把它和其他项目分开了）；项目经历，我是按照star法则写的；专业技能，我把具体的某个大块展开写了，比如如果你很熟悉java的并发和集合的话，你可以这样写 [ **熟悉Java语言，熟悉Java并发编程，阅读过Java集合的源码** ] 这样或许可以引导面试官问你熟悉的地方～

# 自我介绍

我叫xxx，来自苏州大学计算机科学与技术专业

我对于数据库、操作系统、计算机网络、设计模式等专业课有较为深入的认识

可以熟练使用Java和Python，熟悉Java I/O、多线程与网络编程，熟悉前端的常用技术

我参与过多个软件开发项目，熟悉软件开发部署的一般流程。

我曾经设计和开发了一个校园电商平台，该项目在2018年7月上线，为来自多所大学的新生提供宿舍用品预定和配送服务

开发用户模块和商家管理模块，包括商户入驻、店铺管理、商品管理等功能，涉及的技术栈为Spring + Spring MVC + MyBatis 基于Netty开发聊天模块，实现群聊与单聊功能



# 项目介绍

[如何介绍项目经验，非常重要！！！](https://blog.csdn.net/daishu21/article/details/82218434)

**项目背景**：写清楚自己用了**什么技术**，做了**什么项目**，你在其中负责**什么模块**，有**什么收获**，突出关键点，忌讳大段堆砌。技术项目优先于业务项目，按照时间倒叙介绍三个项目就ok了。

## 1. 校园电商平台二次开发

# 如何保证可用性？参考字节提前批的第二次面试经历整理，非常重要！！！

[聊天系统架构设计](https://zhuanlan.zhihu.com/p/37284519)

TODO 对命令的解析使用了消息链模式

[Netty 入门与实战：仿写微信 IM 即时通讯系统](https://juejin.im/book/5b4bc28bf265da0f60130116/section/5b6a1a9cf265da0f87595521)

### 自定义通信协议

作用：减小数据包大小，提供数据传输效率

![img](.\images\YPcPIhLZifHdzFVN.png)

### 粘包问题

应用层是按照 ByteBuf 为 单位来发送数据，但是到了底层操作系统仍然是按照字节流发送数据，因此，数据到了服务端，也是按照字节流的方式读入，然后到了 Netty 应用层面，重新拼装成 ByteBuf，而这里的 ByteBuf 与客户端按顺序发送的 ByteBuf 可能是不对等的。

解决方案：

- 根据自定义协议计算数据包大小，使用基于长度域拆包器 LengthFieldBasedFrameDecoder进行拆包

- 通过判断魔数，拒绝非本协议连接

### 性能优化

对于耗时的操作，我们需要把这些耗时的操作丢到我们的业务线程池中去处理，这样就可以避免一些耗时的操作影响 Netty 的 NIO 线程，从而影响其他的 channel.

```java
ThreadPool threadPool = xxx;

protected void channelRead0(ChannelHandlerContext ctx, T packet) {
    threadPool.submit(new Runnable() {
        // 1. balabala 一些逻辑
        // 2. 数据库或者网络等一些耗时的操作
        // 3. writeAndFlush()
        // 4. balabala 其他的逻辑
    })
}
```

### 心跳与空闲检测

接假死的现象是指在某一端（服务端或者客户端）看来，底层的 TCP 连接已经断开了，但是应用程序并没有捕获到，因此会认为这条连接仍然是存在的。

1. 要处理假死问题首先我们要实现客户端与服务端定期发送心跳，在这里，其实服务端只需要对客户端的定时心跳包进行回复。
2. 客户端与服务端如果都需要检测假死，那么直接在 pipeline 的最前方插入一个自定义 `IdleStateHandler`，在 `channelIdle()` 方法里面自定义连接假死之后的逻辑。
3. 通常空闲检测时间要比发送心跳的时间的两倍要长一些，这也是为了排除偶发的公网抖动，防止误判。

## 2. 宿舍汇校园电商平台

项目包括后端接口、后台管理系统、微信小程序三个部分，整体采用REST架构。使用token构建用户授权体系，采用AOP实现接口的访问权限控制，前端带上token访问后端API，后端收到请求后验证token访问数据库并返回json响应。

### 基于Token构建用户授权体系

token存储在服务端的缓存中，token过期后，客户端需要重新申请。

<img src=".\images\CeNS9iH5awTVcMia.png" alt="image-20200515171247954" style="zoom:50%;" />

### 下单与支付流程

- 客户端调用下单接口，向服务端提交所选择商品的信息
- 服务端对订单相关商品进行**库存量检测<sup>1</sup>**，有库存则将订单数据存入数据库，并通知客户端可以发起支付
- 客户端调用服务端的支付接口进行支付
- 服务端**进行库存量检测**<sup>2</sup>，调用微信支付的接口发起支付
- 微信服务器给服务端返回支付成功的消息，**进行库存量检测<sup>3</sup>**，通过则进行**库存量扣除**

<img src=".\images\ObMGBoa5UbJKGaGx.png" alt="image-20200515172303408" style="zoom:50%;" />



### 优化页面加载速度

服务器带宽小(1Mbps)，多图页面加载速度慢

**解决方案：**

- **客户端缓存页面数据**
访问页面时尝试从本地缓存中加载页面数据，否则向服务器请求数据。

- **服务端动静分离**

 <img src=".\images\dxg8J8GqbLB8pgxX.png" alt="image-20200519112604215" style="zoom: 60%;" />

配置nginx实现动静分离，对静态请求直接返回所需的静态资源（`*.html *.css *.js` 图片等等）
对静态资源开启文件压缩，文本文件的压缩率较高；但图片的压缩率不佳，将图片迁移到七牛云CDN.

```nginx
# 配置文件示例
server {
    listen 			80;
    server_name:	xxx.xxx.xxx.xxx;	
    
    # 开启sendfile
    sendfile on;
    
    location ~ .*\.(jpg|gif|png)$ {
        # 开启文件压缩，gzip算法对文本文件的压缩性能更好
        gzip on;
        gzip_http_version 1.1;
        # 文件压缩等级
        gzip_comp_level 2;
        # 压缩文件类型
        gzip_types image/jpg image/gif image/png;
        # 图片存储路径
        root	xxxx;
    }
}
```

### 负载均衡



### 遇到的问题

分库分表、多表联合查询

数据库的负载均衡和微服务的负载均衡

如何使用Redis设计一个秒杀功能？恶意秒杀如何解决？

> 如果大家不选择像我一样纯从0开始搭建项目的话，可以选择去github上找适合自己方向的项目。
> 有一个UP希望大家可以关注一下，就是b站大佬**程序羊（CodeSheep）**。他有一篇视频是告诉大家如何在github上搜索项目的，传送门：https://www.bilibili.com/video/BV1yJ411S7Wu。
> 基于自己的需求找到对应的项目，把项目跑通、搞懂甚至优化，那这就可以是自己的项目。

> 项目经验怎么写
> 应届生如何获取项目经验？
> 阅读GitHub开源项目，根据实际需求改
> 如电商：https://github.com/macrozheng/mall-learning  后台：FEBS-shiro
> 
> 注意总结
遇到了什么问题，如何解决？
如果让我再做同一个项目我会怎么做？
如果让我继续做这个项目我会怎么做？

>1. 问项目，写的模块什么功能
>2. 项目中的技术点，怎么优化
我举个例子吧，LZ最近准备的案例是BiometricPrompt相关，这是AndroidP开始有的生物识别类，意在同一生物识别的弹窗样式而让用户对于识别更加放心。**但是弹窗会使得背景Activity偏蓝**，于是想解决这个问题，找到了**源码**FragmentDialog，发现里面关于Style和Theme部分的代码是通过从Bundle中取出的值决定的，但是Bundle是BiometricPrompt中利用构造器模式进行初始化的，而且是private的，所以没有接口可以定制。于是**想通过反射试试能否修改对应Bundle中的数据**。实现之后发现**失败了**，因为回看FragmentDialog中，它将Theme和Style对应处理写死了，只是通过int值不同调用不同的case而已。所以修改Bundle是行不通的，**现在在想能否利用动态代理相关思想hook**一下对应的setStyle或者setTheme方法，达到修复背景颜色问题。**但是这样子又违背了这个类创造出来的目的**，所以最近在苦恼这一点。项目里**还是利用了AndroidM的相关生物识别操作自定义弹窗**做的。看我加粗的部分：提出问题+初步解决方案+失败了+失败原因分析+下一步操作+对于这个操作的思考。
不要求你解决了什么问题，但是你要体现出来，你真的在思考。这确实是我最近遇到的问题，我解决方案还是使用AndroidM相关库进行的自定义。
上面这段话透露了什么？你乐于思考、会解决问题，你在学习新技术，你知道版本适配问题，你会利用源码作为解决问题的工具，你知道动态代理和hook，你会利用反射解决问题。
上述能力都是我想体现的，一个案例就够了。我通过这个案例已经打动不少面试官了，各位要做的就是按照我的模式找到自己解决的问题。


# 白板编程

[关于白板编程](http://lucida.me/blog/whiteboard-coding-demystified/)

# 适合问面试官的问题

- 整个小组的运行模式是怎样的？
- 整个项目的后续规划是怎样的？
- 这个产品中的某个技术问题是如何解决的？
- 为什么会选择某些技术和标准？

# HR面

- 如何看待阿里这家公司？为什么说阿里在Java领域做的比较好？
- 为什么会选择这个事业部呢？
- 之前有用过我们事业部的产品吗？如何看待我们的产品？
- 对于游戏行业和互联网行业，有什么偏好吗？
- 自己对编程语言的选择和判断？
- 在Java多年的开发过程中，有什么总结和心得吗？
- 觉得自己有什么优点和待发展的点？
- 是什么支撑你愿意自学？
- 项目成功对于你的意义在哪里？
- 这一次找工作的目标是什么？
- 如果获得了阿里的实习机会，希望获得哪些成长？会有哪些挑战？
- 对前几面的面试官有什么评价吗？
- 之前有实习过吗？
- 为什么选择现在的学校？
- 对团队的风格和氛围有什么喜好吗？
- 自己在合作中是处于什么样的角色呢？
- 和同学在协作中存在什么困难吗？
- 对自己毕业之后的成长有做过什么规划吗？
- 平时会看一些技术类的书籍吗？看这些书籍对你的意义是什么？
- 如何判断和选择offer？

印象最深的就是让我说一下自己的优缺点，

起初我回答的是优点是学习能力强，抗压能力强；hr很不满意，要我具体举例子，然后不断问我，后来对我的总结是勤奋+负责任 

  缺点我说的是二面面试官的评价，缺乏好奇心，然后就会问那你自己是如何觉得的呢？那为什么会这样呢？不断剖析下去说我是因为不想去看更大的世界。 

- 为什么来阿里？
- 之前没考虑过阿里吗？
- 毕业这么久了，你觉得自己最大的改变是什么？
- 用一句话总结一下自己
- 最委屈的事
- 最有成就感的事
- 别人的批评反馈